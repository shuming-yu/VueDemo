{"version":3,"file":"js/134.566cf0b7.js","mappings":"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","sources":["webpack://shuming-yu/./src/views/UserProduct.vue","webpack://shuming-yu/./src/views/UserProduct.vue?c4ac"],"sourcesContent":["<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <div class=\"container\">\r\n    <nav aria-label=\"breadcrumb\">\r\n      <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item\">\r\n          <router-link to=\"/userboard/cart\">購物車</router-link>\r\n        </li>\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">\r\n          {{ product.title }}\r\n        </li>\r\n      </ol>\r\n    </nav>\r\n\r\n    <div class=\"row justify-content-center\">\r\n      <article class=\"col-8\">\r\n        <h2>{{ product.title }}</h2>\r\n        <div>{{ product.content }}</div>\r\n        <div>{{ product.description }}</div>\r\n        <img :src=\"product.imageUrl\" alt=\"\" class=\"img-fluid mb-3\" />\r\n      </article>\r\n      <div class=\"col-4\">\r\n        <div class=\"h5\" v-if=\"!product.price\">\r\n          {{ product.origin_price }} 元\r\n        </div>\r\n        <del class=\"h6\" v-if=\"product.price\"\r\n          >原價 {{ product.origin_price }} 元</del\r\n        >\r\n        <div class=\"h5\" v-if=\"product.price\">\r\n          現在只要 {{ product.price }} 元\r\n        </div>\r\n        <hr />\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn btn-outline-danger\"\r\n          :disabled=\"this.status.loadingItem === this.id\"\r\n          @click=\"addToCart(this.id)\"\r\n        >\r\n          <div\r\n            v-if=\"this.status.loadingItem === this.id\"\r\n            class=\"spinner-border spinner-border-sm\"\r\n            role=\"status\"\r\n          >\r\n            <span class=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n          加到購物車\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      product: {}, // 產品資訊\r\n      id: \"\",\r\n      isLoading: false,\r\n      status: {\r\n        loadingItem: \"\", // 對應品項 id\r\n      },\r\n    };\r\n  },\r\n\r\n  inject: [\"emitter\"],\r\n\r\n  methods: {\r\n    getProduct() {\r\n      // 單一商品細節api = https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E5%96%AE%E4%B8%80%E5%95%86%E5%93%81%E7%B4%B0%E7%AF%80\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${this.id}`;\r\n      this.isLoading = true;\r\n      this.$http.get(api).then((res) => {\r\n        console.log(res);\r\n        if (res.data.success) {\r\n          this.product = res.data.product;\r\n        }\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n\r\n    addToCart(id) {\r\n      this.status.loadingItem = id;\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1, // 預設數量為 1\r\n      };\r\n      // 加入購物車api = https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E5%8A%A0%E5%85%A5%E8%B3%BC%E7%89%A9%E8%BB%8A\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.$http.post(api, { data: cart }).then((res) => {\r\n        console.log(res);\r\n        if(res.data.success){\r\n          // this.emitter.emit('push-message', {\r\n          //   style: 'success',\r\n          //   title: '新增商品成功',\r\n          // })\r\n          this.$swal({\r\n            icon: 'success',\r\n            title: `將 ${ this.product.title } 加入購物車！`,\r\n          });\r\n        }else{\r\n          // this.emitter.emit('push-message', {\r\n          //   style: 'danger',\r\n          //   title: '新增商品失敗',\r\n          //   content: res.data.message.join('、'),\r\n          // })\r\n          this.$swal({\r\n            icon: 'error',\r\n            title: '加入購物車失敗！',\r\n          });\r\n        }\r\n        this.status.loadingItem = \"\";\r\n        this.$router.push(\"/userboard/cart\"); // 加入成功後跳回 cart 頁面\r\n      });\r\n    },\r\n  },\r\n\r\n  created() {\r\n    // 對應 /router/index.js\r\n    this.id = this.$route.params.productId; // 動態路由存在 params 參數內, 將 productId 參數取出\r\n    this.getProduct();\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./UserProduct.vue?vue&type=template&id=397a6e98\"\nimport script from \"./UserProduct.vue?vue&type=script&lang=js\"\nexport * from \"./UserProduct.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"E:\\\\Code\\\\VueDemo\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","role","_hoisted_17","_createVNode","_component_Loading","active","$data","_component_router_link","to","_toDisplayString","title","content","description","src","imageUrl","alt","price","_createElementBlock","origin_price","_hoisted_14","type","disabled","status","loadingItem","id","onClick","$options","_hoisted_18","data","product","isLoading","inject","methods","getProduct","api","this","$http","get","then","res","console","log","success","addToCart","cart","product_id","qty","post","$swal","icon","$router","push","created","$route","params","productId","__exports__","render"],"sourceRoot":""}