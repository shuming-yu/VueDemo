{"version":3,"file":"js/717.9790698a.js","mappings":"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","sources":["webpack://shuming-yu/./src/views/UserCart.vue","webpack://shuming-yu/./src/views/UserCart.vue?698a"],"sourcesContent":["<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n\r\n  <header class=\"header\" style=\"background-image: url(https://images.unsplash.com/photo-1441986300917-64674bd600d8?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80); height: 300px\">\r\n    <div class=\"container d-flex justify-content-center align-items-center h-100\">\r\n      <div class=\"row\">\r\n        <h1 class=\"text-white bg-secondary bg-opacity-75 rounded-pill\">商品列表</h1>\r\n      </div>\r\n    </div>\r\n  </header>\r\n\r\n  <div class=\"row mt-4\">\r\n    <!-- 商品列表 -->\r\n    <div class=\"col-md-7\">\r\n      <table class=\"table align-middle\">\r\n        <thead>\r\n          <tr>\r\n            <th width=\"200\">圖片</th>\r\n            <th width=\"150\">商品名稱</th>\r\n            <th width=\"120\">價格</th>\r\n            <th width=\"200\">功能</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"item in products\" :key=\"item.id\">\r\n            <td style=\"width: 100px\">\r\n              <div\r\n                style=\"\r\n                  height: 200px;\r\n                  background-size: cover;\r\n                  background-position: center;\r\n                \"\r\n                :style=\"{ backgroundImage: `url(${item.imageUrl})` }\"\r\n              ></div>\r\n            </td>\r\n            <td>\r\n              <a href=\"#\" class=\"text-dark\">{{ item.title }}</a>\r\n            </td>\r\n            <td>\r\n              <div class=\"h5\" v-if=\"!item.price\">\r\n                {{ item.origin_price }} 元\r\n              </div>\r\n              <del class=\"h6\" v-if=\"item.price\"\r\n                >原價 {{ item.origin_price }} 元</del\r\n              >\r\n              <div class=\"h5\" v-if=\"item.price\">\r\n                現在只要 {{ item.price }} 元!!\r\n              </div>\r\n            </td>\r\n            <td>\r\n              <div class=\"btn-group btn-group-sm\">\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-outline-secondary\"\r\n                  @click=\"getProduct(item.id)\"\r\n                >\r\n                  查看更多\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-outline-danger\"\r\n                  @click=\"addToCart(item.id)\"\r\n                  :disabled=\"status.loadingItem === item.id\"\r\n                >\r\n                  <!-- 參考 spinners 讀取效果 : https://bootstrap5.hexschool.com/docs/5.1/components/spinners/ -->\r\n                  <div\r\n                    v-if=\"status.loadingItem === item.id\"\r\n                    class=\"spinner-grow spinner-grow-sm\"\r\n                    role=\"status\"\r\n                  >\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                  </div>\r\n                  加到購物車\r\n                </button>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <!-- 商品列表END -->\r\n\r\n    <!-- 購物車列表 -->\r\n    <div class=\"col-md-5\">\r\n      <div class=\"sticky-top\">\r\n        <table class=\"table align-middle\">\r\n          <thead>\r\n            <tr>\r\n              <th></th>\r\n              <th>品名</th>\r\n              <th style=\"width: 110px\">數量</th>\r\n              <th>單價</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <template v-if=\"cart.carts\">\r\n              <!-- 判斷陣列存在 -->\r\n              <tr v-for=\"item in cart.carts\" :key=\"item.id\">\r\n                <td>\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn btn-outline-danger btn-sm\"\r\n                    :disabled=\"status.loadingItem === item.id\"\r\n                    @click=\"removeCartItem(item.id)\"\r\n                  >\r\n                    <i class=\"bi bi-trash3\"></i>\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  {{ item.product.title }}\r\n                  <div class=\"text-success\" v-if=\"item.coupon\">\r\n                    已套用優惠券\r\n                  </div>\r\n                </td>\r\n                <td>\r\n                  <div class=\"input-group input-group-sm\">\r\n                    <!-- min 設定輸入最小為 1 -->\r\n                    <input\r\n                      type=\"number\"\r\n                      class=\"form-control\"\r\n                      min=\"1\"\r\n                      :disabled=\"item.id === status.loadingItem\"\r\n                      @change=\"updateCart(item)\"\r\n                      v-model.number=\"item.qty\"\r\n                    />\r\n                    <div class=\"input-group-text\">\r\n                      / {{ item.product.unit }}\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td class=\"text-end\">\r\n                  <small\r\n                    v-if=\"cart.final_total !== cart.total\"\r\n                    class=\"text-success\"\r\n                    >折扣價：</small\r\n                  >\r\n                  {{ $filters.currency(item.final_total) }}\r\n                </td>\r\n              </tr>\r\n            </template>\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <td colspan=\"3\" class=\"text-end\">總計</td>\r\n              <td class=\"text-end\">{{ $filters.currency(cart.total) }}</td>\r\n            </tr>\r\n            <tr v-if=\"cart.final_total !== cart.total\">\r\n              <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\r\n              <td class=\"text-end text-success\">\r\n                {{ $filters.currency(cart.final_total) }}\r\n              </td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n        <div class=\"input-group mb-3 input-group-sm\">\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-model=\"coupon_code\"\r\n            placeholder=\"請輸入優惠碼\"\r\n          />\r\n          <div class=\"input-group-append\">\r\n            <button\r\n              class=\"btn btn-outline-secondary\"\r\n              type=\"button\"\r\n              @click=\"addCouponCode\"\r\n            >\r\n              套用優惠碼\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <!-- <div class=\"d-flex justify-content-center\">\r\n          <button type=\"button\" class=\"btn btn-primary\">清空購物車</button>\r\n        </div> -->\r\n      </div>\r\n    </div>\r\n    <!-- 購物車列表END -->\r\n\r\n    <!-- 用戶訂單 -->\r\n    <div class=\"my-5 row justify-content-center\">\r\n      <VForm class=\"col-md-6\" v-slot=\"{ errors }\" @submit=\"createOrder\">\r\n        <!-- {{ errors }} -->\r\n        <!-- v-slot 把元件本身的資源提取出來使用 -->\r\n        <div class=\"mb-3\">\r\n          <label for=\"email\" class=\"form-label\">Email</label>\r\n          <!-- input 因為改成元件，必須包含頭尾的標籤 -->\r\n          <!-- :class 的 errors[] 中的值對應 name -->\r\n          <VField\r\n            id=\"email\"\r\n            name=\"Email\"\r\n            type=\"email\"\r\n            class=\"form-control\"\r\n            placeholder=\"請輸入 Email\"\r\n            rules=\"email|required\"\r\n            :class=\"{ 'is-invalid': errors['Email'] }\"\r\n            v-model=\"form.user.email\"\r\n          >\r\n          </VField>\r\n          <!-- VField & ErrorMessage name欄位互相對應 -->\r\n          <ErrorMessage name=\"Email\" class=\"invalid-feedback\"></ErrorMessage>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"name\" class=\"form-label\">收件人姓名</label>\r\n          <VField\r\n            id=\"name\"\r\n            name=\"姓名\"\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            placeholder=\"請輸入姓名\"\r\n            rules=\"required\"\r\n            :class=\"{ 'is-invalid': errors['姓名'] }\"\r\n            v-model=\"form.user.name\"\r\n          >\r\n          </VField>\r\n          <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"tel\" class=\"form-label\">收件人電話</label>\r\n          <VField\r\n            id=\"tel\"\r\n            name=\"電話\"\r\n            type=\"tel\"\r\n            class=\"form-control\"\r\n            placeholder=\"請輸入電話 0988692887\"\r\n            :rules=\"isPhone\"\r\n            :class=\"{ 'is-invalid': errors['電話'] }\"\r\n            v-model=\"form.user.tel\"\r\n          >\r\n          </VField>\r\n          <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"address\" class=\"form-label\">收件人地址</label>\r\n          <VField\r\n            id=\"address\"\r\n            name=\"地址\"\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            placeholder=\"請輸入地址\"\r\n            rules=\"required\"\r\n            :class=\"{ 'is-invalid': errors['地址'] }\"\r\n            v-model=\"form.user.address\"\r\n          >\r\n          </VField>\r\n          <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"message\" class=\"form-label\">留言</label>\r\n          <textarea\r\n            name=\"\"\r\n            id=\"message\"\r\n            class=\"form-control\"\r\n            cols=\"30\"\r\n            rows=\"10\"\r\n            :class=\"{ 'is-invalid': errors['留言'] }\"\r\n            v-model=\"form.message\"\r\n          ></textarea>\r\n        </div>\r\n        <div class=\"text-end\">\r\n          <!--       \r\n                    如果要觸發 submit 驗證，需綁定事件在外層的 form 標籤上\r\n                    所以這邊的 button 不需要綁上方法\r\n          -->\r\n          <button class=\"btn btn-danger\" >送出訂單</button>\r\n        </div>\r\n      </VForm>\r\n    </div>\r\n    <!-- 用戶訂單END -->\r\n  </div>\r\n\r\n  <link href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css\" rel=\"stylesheet\">\r\n  <footer class=\"p-2 border-top bg-light\">\r\n    <div class=\"container align-items-center justify-content-between d-flex\">\r\n      <p class=\"mb-0 text-muted\">\r\n        Copyright &copy; 2022 All Rights Reserved. Designed by ShuMingYU\r\n      </p>\r\n      <ul class=\"nav social\">\r\n        <li class=\"nav-item\">\r\n          <a href=\"https://github.com/shuming-yu\" class=\"nav-link text-muted\"> <i class=\"fa fa-github fa-2x\"></i> </a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a href=\"#\" class=\"nav-link text-muted\"> <i class=\"fa fa-facebook fa-2x\"></i> </a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </footer>\r\n\r\n</template>\r\n\r\n<script>\r\nimport DelModal from \"@/components/DelModal.vue\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: [], // 產品資訊\r\n      product: {},\r\n      isLoading: false, // 預設 false - 關閉功能\r\n      status: {\r\n        loadingItem: \"\", // 對應品項 id\r\n      },\r\n      cart: {}, // 購物車列表資訊\r\n      coupon_code: \"\", // 優惠碼\r\n\r\n      form: {\r\n        // 使用者訂單資訊\r\n        user: {\r\n          name: \"\",\r\n          tel: \"\",\r\n          email: \"\",\r\n          address: \"\",\r\n        },\r\n        message: \"\",\r\n      },\r\n    };\r\n  },\r\n\r\n  inject: [\"emitter\"],\r\n\r\n  components: {\r\n    DelModal,\r\n  },\r\n\r\n  methods: {\r\n    getProducts() {\r\n      // 顯示後台產品\r\n      // 取的商品列表api = https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E5%8F%96%E5%BE%97%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\r\n      this.isLoading = true;\r\n      this.$http.get(api).then((res) => {\r\n        console.log(res.data);\r\n        this.products = res.data.products; // 取得資訊丟到 products 陣列內\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n\r\n    getProduct(id) {\r\n      // 點選取得產品 id 後送到 product 頁面\r\n      this.$router.push(`/userboard/product/${id}`);\r\n    },\r\n\r\n    addToCart(id) {\r\n      this.isLoading = true;\r\n      //console.log(id);\r\n      // 加入購物車api = https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E5%8A%A0%E5%85%A5%E8%B3%BC%E7%89%A9%E8%BB%8A\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.status.loadingItem = id; // 將取得 id 放入, 後續比對用\r\n      const cart = {\r\n        product_id: id, // 將取得 id 放入 product_id\r\n        qty: 1, // 預設數量為 1\r\n      };\r\n      this.$http.post(api, { data: cart }).then((res) => {\r\n        this.isLoading = false;\r\n        this.status.loadingItem = \"\"; // 成功後清空\r\n        console.log(res); // 確認送出是否成功\r\n        if(res.data.success){\r\n          this.product = res.data.data.product; // 取得資訊塞入 product 內\r\n          // this.emitter.emit('push-message', {\r\n          //   style: 'success',\r\n          //   title: '新增商品成功',\r\n          // })\r\n          this.$swal({\r\n            icon: 'success',\r\n            title: `已將 ${ this.product.title } 加入購物車！`,\r\n          });\r\n        }else{\r\n          // this.emitter.emit('push-message', {\r\n          //   style: 'danger',\r\n          //   title: '新增商品失敗',\r\n          //   content: res.data.message.join('、'),\r\n          // })\r\n          this.$swal({\r\n            icon: 'error',\r\n            title: '加入購物車失敗！',\r\n          });\r\n        }\r\n        this.product = {},  // 結束後清空\r\n        this.getCart(); // 重整購物車列表\r\n      });\r\n    },\r\n\r\n    getCart() {\r\n      this.isLoading = true;\r\n      // 取得購物車列表api = https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E5%8F%96%E5%BE%97%E8%B3%BC%E7%89%A9%E8%BB%8A%E5%88%97%E8%A1%A8\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.$http.get(api).then((res) => {\r\n        this.isLoading = false;\r\n        console.log(res.data.data.carts);\r\n        this.cart = res.data.data;\r\n      });\r\n    },\r\n\r\n    updateCart(item) {\r\n      this.status.loadingItem = item.id;\r\n      // 更新購物車api = https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E6%9B%B4%E6%96%B0%E8%B3%BC%E7%89%A9%E8%BB%8A\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\r\n      const cart = {\r\n        // id - 單一品項 id\r\n        product_id: item.product_id, // product_id - 產品 id\r\n        qty: item.qty, // 更新後數量\r\n      };\r\n      this.$http.put(api, { data: cart }).then((res) => {\r\n        // console.log(res);\r\n        this.status.loadingItem = \"\"; // 觸發 disable 動作(使用者無法狂點)\r\n        this.getCart(); // 重整購物車列表\r\n      });\r\n    },\r\n\r\n    removeCartItem(id) {\r\n      this.status.loadingItem = id;\r\n      // 刪除某一筆購物車資料 api = https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E5%88%AA%E9%99%A4%E6%9F%90%E4%B8%80%E7%AD%86%E8%B3%BC%E7%89%A9%E8%BB%8A%E8%B3%87%E6%96%99\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\r\n      this.$http.delete(api).then((res) => {\r\n        console.log(res);\r\n        if(res.data.success){\r\n          this.$swal({\r\n            icon: 'success',\r\n            title: '已將商品從購物車移除！',\r\n          })\r\n        }else{\r\n          this.$swal({\r\n            icon: 'error',\r\n            title: '商品從購物車移除失敗！',\r\n          })\r\n        }\r\n        this.status.loadingItem = \"\";\r\n        this.getCart(); // 重整購物車列表\r\n      });\r\n    },\r\n\r\n    addCouponCode() {\r\n      // 套用優惠券 api = https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E5%A5%97%E7%94%A8%E5%84%AA%E6%83%A0%E5%88%B8\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\r\n      const coupon = {\r\n        code: this.coupon_code,\r\n      };\r\n      this.$http.post(url, { data: coupon }).then((res) => {\r\n        console.log(res);\r\n        this.getCart(); // 重整購物車列表\r\n      });\r\n    },\r\n\r\n    // VeeValiadation 參考 : https://hackmd.io/FFv0a5cBToOATP7uI5COMQ\r\n    createOrder() {\r\n      // 送出訂單\r\n      // 結帳頁面 api = https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E7%B5%90%E5%B8%B3%E9%A0%81%E9%9D%A2\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\r\n      const order = this.form;\r\n      this.$http.post(url, { data: order }).then((res) => {\r\n        console.log(res);\r\n        this.$router.push(`/userboard/checkout/${res.data.orderId}`); // 送出訂單成功後, 切換到 checkout 頁面\r\n      });\r\n    },\r\n    isPhone(value) {\r\n      // 電話規則\r\n      const phoneNumber = /^(09)[0-9]{8}$/;\r\n      return phoneNumber.test(value) ? true : \"請輸入正確的電話號碼\";\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.getProducts(); // 顯示產品\r\n    this.getCart(); // 顯示購物車列表\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./UserCart.vue?vue&type=template&id=2c20ed30\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"E:\\\\Code\\\\VueDemo\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","style","width","href","role","_hoisted_15","_hoisted_23","colspan","for","_createVNode","_component_Loading","active","$data","_hoisted_1","_hoisted_5","_createElementBlock","_Fragment","_renderList","item","key","id","backgroundImage","imageUrl","_toDisplayString","title","price","origin_price","type","onClick","$options","_hoisted_12","disabled","loadingItem","_hoisted_16","_hoisted_21","carts","product","coupon","min","onChange","qty","$event","unit","final_total","total","_ctx","currency","_hoisted_31","_hoisted_33","_hoisted_34","placeholder","_component_VForm","onSubmit","errors","_hoisted_40","_component_VField","name","rules","user","email","_component_ErrorMessage","_hoisted_42","_hoisted_44","tel","_hoisted_46","address","_hoisted_48","cols","rows","message","_hoisted_49","_hoisted_50","data","products","isLoading","status","cart","coupon_code","form","inject","components","DelModal","methods","getProducts","api","this","$http","get","then","res","console","log","getProduct","$router","push","addToCart","product_id","post","success","$swal","icon","getCart","updateCart","put","removeCartItem","delete","addCouponCode","url","code","createOrder","order","orderId","isPhone","value","phoneNumber","test","created","__exports__","render"],"sourceRoot":""}